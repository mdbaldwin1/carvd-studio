/*
 * Domain-Specific CSS
 *
 * "Twilight Studio" redesign — adjusted sizing to match bigger base font
 * and rounder radii. Complex selectors (:has(), vendor pseudo-elements,
 * accordion/collapsible styling, @media print).
 */

/* ===========================================
   JOINERY ADJUSTMENTS
   Accordion-based section in Properties panel
   =========================================== */

@layer components {
  .joinery-adjustments {
    margin-top: 16px;
    border: 1px solid var(--color-border);
    border-radius: var(--radius-sm);
    padding: 0;
  }

  .joinery-indicator {
    color: var(--color-accent);
    font-size: 9px;
  }

  .joinery-inputs {
    padding: 0 14px 14px 14px;
    display: flex;
    flex-direction: column;
    gap: 10px;
  }

  .joinery-input-row {
    display: flex;
    align-items: center;
    gap: 10px;
  }

  .joinery-input-row label {
    flex: 0 0 88px;
    font-size: 13px;
    color: var(--color-text-muted);
  }

  .joinery-input-row input {
    flex: 1;
    width: auto;
  }
}

/* ===========================================
   COLLAPSIBLE SECTIONS
   Generic accordion styling (Position, Notes)
   =========================================== */

@layer components {
  .collapsible-section {
    margin-top: 10px;
    border: 1px solid var(--color-border);
    border-radius: var(--radius-sm);
    padding: 0;
  }

  .collapsible-content {
    padding: 0 14px 14px 14px;
  }

  .has-content-indicator {
    color: var(--color-accent);
    font-size: 9px;
  }
}

/* ===========================================
   PRINT STYLES
   @media print for cutting diagrams
   =========================================== */

@media print {
  /* Only apply when printing diagrams (currently unused — PDF export is used instead) */

  /* Make the modal backdrop static and transparent */
  body.printing-diagrams .cut-list-backdrop {
    position: static !important;
    background: none !important;
    display: block !important;
    padding: 0 !important;
    margin: 0 !important;
  }

  /* Make the dialog fill the page */
  body.printing-diagrams [aria-labelledby='cut-list-modal-title'] {
    position: static !important;
    width: 100% !important;
    max-width: none !important;
    max-height: none !important;
    height: auto !important;
    margin: 0 !important;
    padding: 20px !important;
    border: none !important;
    border-radius: 0 !important;
    box-shadow: none !important;
    background: white !important;
    color: black !important;
  }

  /* Hide non-printable UI elements */
  body.printing-diagrams .cut-list-tabs,
  body.printing-diagrams .cut-list-footer,
  body.printing-diagrams .cut-list-stale-warning,
  body.printing-diagrams .cut-list-statistics,
  body.printing-diagrams .modal-header [aria-label='Close'] {
    display: none !important;
  }

  /* Show modal header text */
  body.printing-diagrams .modal-header {
    border-bottom: 2px solid #333 !important;
    padding-bottom: 10px !important;
    margin-bottom: 20px !important;
    background: none !important;
  }

  body.printing-diagrams .modal-header h2 {
    color: black !important;
    font-size: 18pt !important;
  }

  body.printing-diagrams .modal-header h2::after {
    content: ' - Cutting Diagrams';
  }

  /* Tab content should be visible and expand */
  body.printing-diagrams .cut-list-content {
    display: block !important;
    overflow: visible !important;
    height: auto !important;
    max-height: none !important;
    padding: 0 !important;
  }

  /* Hide non-diagram tabs */
  body.printing-diagrams .cut-list-parts-tab,
  body.printing-diagrams .shopping-list-tab {
    display: none !important;
  }

  /* Diagrams tab */
  body.printing-diagrams .cut-list-diagrams-tab {
    display: block !important;
    overflow: visible !important;
    height: auto !important;
  }

  body.printing-diagrams .diagrams-content {
    overflow: visible !important;
    height: auto !important;
  }

  body.printing-diagrams .stock-group {
    break-inside: avoid;
    margin-bottom: 20px !important;
    border: 1px solid #ccc !important;
    page-break-inside: avoid;
  }

  body.printing-diagrams .stock-group-title {
    background: #f0f0f0 !important;
    color: black !important;
    -webkit-print-color-adjust: exact;
    print-color-adjust: exact;
  }

  body.printing-diagrams .stock-boards {
    overflow: visible !important;
  }

  body.printing-diagrams .stock-board-diagram {
    break-inside: avoid;
    page-break-inside: avoid;
    border: 1px solid #ddd !important;
    background: white !important;
    margin-bottom: 10px !important;
  }

  body.printing-diagrams .board-svg rect {
    -webkit-print-color-adjust: exact;
    print-color-adjust: exact;
  }
}

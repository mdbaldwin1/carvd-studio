/* Google Fonts - Nunito Sans */
@import url('https://fonts.googleapis.com/css2?family=Nunito+Sans:wght@300;400;500;600;700&display=swap');

@import 'tailwindcss';

/* ===========================================
   CSS CUSTOM PROPERTIES — "Twilight Studio" redesign
   Uses Twilight Indigo backgrounds, Cerulean accents,
   Bright Amber CTAs, Lilac Ash subtle tones
   =========================================== */

:root {
  /*
   * PALETTE (exact user-supplied hex values):
   *   #203864  Twilight Indigo
   *   #077187  Cerulean
   *   #AEA4BF  Lilac Ash
   *   #FFD21F  Gold
   *   #FFEECF  Papaya Whip
   */

  /* Backgrounds — dark greys (same as original) */
  --color-bg: #1a1a1a;
  --color-bg-alt: #222222;
  --color-bg-hover: #2a2a2a;
  --color-bg-dark: #1a1a1a;
  --color-surface: #242424;
  --color-surface-hover: #2a2a2a;
  --color-border: #333;
  --color-selected: #3a3a3a;
  --color-overlay: rgba(0, 0, 0, 0.6);
  --color-overlay-heavy: rgba(0, 0, 0, 0.75);

  /* Aliases for semantic naming */
  --color-bg-secondary: var(--color-bg-alt);
  --color-bg-tertiary: #2e2e2e;
  --color-bg-sidebar: var(--color-surface);

  /* Text — Papaya Whip & Lilac Ash */
  --color-text: #ffeecf; /* ← exact Papaya Whip */
  --color-text-muted: #aea4bf; /* ← exact Lilac Ash */
  --color-text-secondary: var(--color-text-muted);
  --color-text-tertiary: #8a7ea3; /* Lilac Ash darkened */

  /* Accent — Cerulean (interactive: focus, highlights, active states) */
  --color-accent: #077187; /* ← exact Cerulean */
  --color-accent-hover: #0990a6; /* Cerulean lightened */
  --color-accent-muted: #055a6c; /* Cerulean darkened */
  --color-accent-bg: rgba(7, 113, 135, 0.15);
  --color-accent-foreground: #ffeecf; /* Papaya Whip on Cerulean */

  /* Primary — Gold (CTAs, emphasis) */
  --color-primary: #ffd21f; /* ← exact Gold */
  --color-primary-hover: #ffd94d; /* Gold lightened */
  --color-primary-muted: #d4ae19; /* Gold darkened */
  --color-primary-bg: rgba(255, 210, 31, 0.1);
  --color-primary-foreground: #203864; /* Twilight Indigo on Gold */

  /* Secondary — Twilight Indigo (emphasis, badges, deep accents) */
  --color-secondary: #203864; /* ← exact Twilight Indigo */
  --color-secondary-hover: #2a4a82; /* Twilight Indigo lightened */
  --color-secondary-muted: #182a4c; /* Twilight Indigo darkened */
  --color-secondary-foreground: #ffeecf; /* Papaya Whip on Indigo */

  /* Semantic — warning */
  --color-warning: #ffa600;
  --color-warning-hover: #ffb833;
  --color-warning-bg: rgba(255, 166, 0, 0.12);
  --color-warning-border: #ffa600;
  --color-warning-text: #203864;

  /* Semantic — danger */
  --color-danger: #c45454;
  --color-danger-hover: #d46b6b;
  --color-danger-bg: rgba(196, 84, 84, 0.15);
  --color-danger-border: #c45454;

  /* Semantic — success */
  --color-success: #2a9d6a;
  --color-success-hover: #34b87d;
  --color-success-bg: rgba(42, 157, 106, 0.12);
  --color-success-border: #2a9d6a;

  /* Error — alias for danger */
  --color-error: var(--color-danger);
  --color-error-hover: var(--color-danger-hover);
  --color-error-bg: var(--color-danger-bg);
  --color-error-border: var(--color-danger-border);
  --color-error-text: var(--color-danger);

  /* Reference parts — Cerulean */
  --color-reference: #077187; /* ← exact Cerulean */
  --color-reference-bg: rgba(7, 113, 135, 0.12);

  /* Info — Lilac Ash */
  --color-info: #aea4bf; /* ← exact Lilac Ash */
  --color-info-bg: rgba(174, 164, 191, 0.12);
  --color-info-border: #aea4bf; /* ← exact Lilac Ash */
  --color-info-text: #ffeecf;

  /* Layout */
  --sidebar-width: 264px;
  --header-height: 56px;

  /* Spacing & Radii */
  --radius-sm: 6px;
  --radius-md: 8px;
  --radius-lg: 12px;

  /* === shadcn/ui convention aliases (bridge for migration) ===
   * These map shadcn's expected variable names to existing Twilight Studio vars.
   * Both conventions coexist during migration.
   *
   * NAMING COLLISION NOTE:
   *   Project --color-primary = Gold (#ffd21f) — used for CTAs
   *   shadcn --primary = main interactive color → mapped to Cerulean (--color-accent)
   */
  --background: var(--color-bg);
  --foreground: var(--color-text);
  --card: var(--color-surface);
  --card-foreground: var(--color-text);
  --popover: var(--color-surface);
  --popover-foreground: var(--color-text);
  --primary: var(--color-accent);
  --primary-foreground: var(--color-accent-foreground);
  --secondary: var(--color-secondary);
  --secondary-foreground: var(--color-secondary-foreground);
  --muted: var(--color-bg-alt);
  --muted-foreground: var(--color-text-muted);
  --accent: var(--color-surface-hover);
  --accent-foreground: var(--color-text);
  --destructive: var(--color-danger);
  --destructive-foreground: #ffffff;
  --border: var(--color-border);
  --input: var(--color-border);
  --ring: var(--color-accent);
  --radius: var(--radius-md);
  --chart-1: var(--color-accent);
  --chart-2: var(--color-primary);
  --chart-3: var(--color-success);
  --chart-4: var(--color-warning);
  --chart-5: var(--color-danger);

  color-scheme: dark;
}

/* Light theme — Papaya Whip backgrounds with Cerulean & Indigo accents */
[data-theme='light'] {
  /* Backgrounds — warm cream tones from Papaya Whip */
  --color-bg: #ffeecf; /* ← exact Papaya Whip */
  --color-bg-alt: #ffe4b5; /* Papaya Whip darkened */
  --color-bg-hover: #ffddaa;
  --color-bg-dark: #203864; /* ← exact Twilight Indigo */
  --color-surface: #fff8e8; /* Warm white (Papaya Whip lightened) */
  --color-surface-hover: #fff0d4;
  --color-border: #d4c8b0; /* Warm grey border */
  --color-selected: #e8dcc8;
  --color-overlay: rgba(32, 56, 100, 0.4);
  --color-overlay-heavy: rgba(32, 56, 100, 0.6);

  /* Aliases */
  --color-bg-secondary: var(--color-bg-alt);
  --color-bg-tertiary: #ffd8a0;
  --color-bg-sidebar: var(--color-surface);

  /* Text — Twilight Indigo & Lilac Ash */
  --color-text: #203864; /* ← exact Twilight Indigo */
  --color-text-muted: #756b82; /* Lilac Ash darkened for contrast */
  --color-text-secondary: var(--color-text-muted);
  --color-text-tertiary: #aea4bf; /* ← exact Lilac Ash */

  /* Accent — Cerulean (same hue, works well on light bg) */
  --color-accent: #077187; /* ← exact Cerulean */
  --color-accent-hover: #055a6c; /* Cerulean darkened */
  --color-accent-muted: #0990a6; /* Cerulean lightened */
  --color-accent-bg: rgba(7, 113, 135, 0.1);
  --color-accent-foreground: #ffffff;

  /* Primary — Gold (darkened for contrast against cream bg) */
  --color-primary: #d4ae19; /* Gold darkened for light bg */
  --color-primary-hover: #b8960e; /* Gold further darkened */
  --color-primary-muted: #ffd21f; /* ← exact Gold */
  --color-primary-bg: rgba(255, 210, 31, 0.15);
  --color-primary-foreground: #203864; /* Twilight Indigo on Gold */

  /* Secondary — Twilight Indigo */
  --color-secondary: #203864; /* ← exact Twilight Indigo */
  --color-secondary-hover: #182a4c; /* Indigo darkened */
  --color-secondary-muted: #2a4a82; /* Indigo lightened */
  --color-secondary-foreground: #ffffff;

  /* Semantic — warning */
  --color-warning: #cc8500;
  --color-warning-hover: #996300;
  --color-warning-bg: rgba(204, 133, 0, 0.12);
  --color-warning-border: #cc8500;
  --color-warning-text: #203864;

  /* Semantic — danger */
  --color-danger: #b84343;
  --color-danger-hover: #a33a3a;
  --color-danger-bg: rgba(184, 67, 67, 0.12);
  --color-danger-border: #b84343;

  /* Semantic — success */
  --color-success: #228055;
  --color-success-hover: #1a6644;
  --color-success-bg: rgba(34, 128, 85, 0.1);
  --color-success-border: #228055;

  /* Error — alias for danger */
  --color-error: var(--color-danger);
  --color-error-hover: var(--color-danger-hover);
  --color-error-bg: var(--color-danger-bg);
  --color-error-border: var(--color-danger-border);
  --color-error-text: var(--color-danger);

  /* Reference — Cerulean darkened */
  --color-reference: #055a6c;
  --color-reference-bg: rgba(5, 90, 108, 0.1);

  /* Info — Lilac Ash */
  --color-info: #756b82; /* Lilac Ash darkened for contrast */
  --color-info-bg: rgba(117, 107, 130, 0.1);
  --color-info-border: #aea4bf; /* ← exact Lilac Ash */
  --color-info-text: #203864;

  /* === shadcn/ui convention aliases (light theme) === */
  --background: var(--color-bg);
  --foreground: var(--color-text);
  --card: var(--color-surface);
  --card-foreground: var(--color-text);
  --popover: var(--color-surface);
  --popover-foreground: var(--color-text);
  --primary: var(--color-accent);
  --primary-foreground: var(--color-accent-foreground);
  --secondary: var(--color-secondary);
  --secondary-foreground: var(--color-secondary-foreground);
  --muted: var(--color-bg-alt);
  --muted-foreground: var(--color-text-muted);
  --accent: var(--color-surface-hover);
  --accent-foreground: var(--color-text);
  --destructive: var(--color-danger);
  --destructive-foreground: #ffffff;
  --border: var(--color-border);
  --input: var(--color-border);
  --ring: var(--color-accent);
  --radius: var(--radius-md);
  --chart-1: var(--color-accent);
  --chart-2: var(--color-primary);
  --chart-3: var(--color-success);
  --chart-4: var(--color-warning);
  --chart-5: var(--color-danger);

  color-scheme: light;
}

/*
 * Map CSS custom properties to Tailwind theme tokens.
 * Uses @theme inline to avoid generating duplicate CSS custom properties —
 * the actual values come from :root and [data-theme='light'] above.
 */
@theme inline {
  /* Backgrounds */
  --color-bg: var(--color-bg);
  --color-bg-alt: var(--color-bg-alt);
  --color-bg-hover: var(--color-bg-hover);
  --color-bg-dark: var(--color-bg-dark);
  --color-surface: var(--color-surface);
  --color-surface-hover: var(--color-surface-hover);
  --color-border: var(--color-border);
  --color-selected: var(--color-selected);
  --color-overlay: var(--color-overlay);
  --color-overlay-heavy: var(--color-overlay-heavy);
  --color-bg-secondary: var(--color-bg-secondary);
  --color-bg-tertiary: var(--color-bg-tertiary);
  --color-bg-sidebar: var(--color-bg-sidebar);

  /* Text */
  --color-text: var(--color-text);
  --color-text-muted: var(--color-text-muted);
  --color-text-secondary: var(--color-text-secondary);
  --color-text-tertiary: var(--color-text-tertiary);

  /* Accent - cerulean */
  --color-accent: var(--color-accent);
  --color-accent-hover: var(--color-accent-hover);
  --color-accent-muted: var(--color-accent-muted);
  --color-accent-bg: var(--color-accent-bg);
  --color-accent-foreground: var(--color-accent-foreground);

  /* Primary - gold */
  --color-primary: var(--color-primary);
  --color-primary-hover: var(--color-primary-hover);
  --color-primary-muted: var(--color-primary-muted);
  --color-primary-bg: var(--color-primary-bg);
  --color-primary-foreground: var(--color-primary-foreground);

  /* Secondary - twilight indigo */
  --color-secondary: var(--color-secondary);
  --color-secondary-hover: var(--color-secondary-hover);
  --color-secondary-muted: var(--color-secondary-muted);
  --color-secondary-foreground: var(--color-secondary-foreground);

  /* Semantic - warning */
  --color-warning: var(--color-warning);
  --color-warning-hover: var(--color-warning-hover);
  --color-warning-bg: var(--color-warning-bg);
  --color-warning-border: var(--color-warning-border);
  --color-warning-text: var(--color-warning-text);

  /* Semantic - danger */
  --color-danger: var(--color-danger);
  --color-danger-hover: var(--color-danger-hover);
  --color-danger-bg: var(--color-danger-bg);
  --color-danger-border: var(--color-danger-border);

  /* Semantic - success */
  --color-success: var(--color-success);
  --color-success-hover: var(--color-success-hover);
  --color-success-bg: var(--color-success-bg);
  --color-success-border: var(--color-success-border);

  /* Semantic - error (alias for danger) */
  --color-error: var(--color-error);
  --color-error-hover: var(--color-error-hover);
  --color-error-bg: var(--color-error-bg);
  --color-error-border: var(--color-error-border);
  --color-error-text: var(--color-error-text);

  /* Reference */
  --color-reference: var(--color-reference);
  --color-reference-bg: var(--color-reference-bg);

  /* Info */
  --color-info: var(--color-info);
  --color-info-bg: var(--color-info-bg);
  --color-info-border: var(--color-info-border);
  --color-info-text: var(--color-info-text);

  /* Border radius */
  --radius-sm: var(--radius-sm);
  --radius-md: var(--radius-md);
  --radius-lg: var(--radius-lg);

  /* === shadcn/ui convention tokens (non-conflicting) ===
   * Maps shadcn-convention CSS vars to Tailwind utility classes.
   * e.g. bg-background, text-foreground, bg-card, bg-muted, etc.
   *
   * NOTE: --color-primary, --color-secondary, --color-accent already exist
   * above with project-specific meanings (Gold, Indigo, Cerulean). Those
   * Tailwind utilities (bg-primary, bg-accent, etc.) keep their existing
   * meanings during migration. shadcn components will be adapted to use
   * the project token names when added in later beads.
   * The unprefixed CSS vars (--primary, --background, etc.) are still
   * available via var() for any component that needs them directly.
   */
  --color-background: var(--background);
  --color-foreground: var(--foreground);
  --color-card: var(--card);
  --color-card-foreground: var(--card-foreground);
  --color-popover: var(--popover);
  --color-popover-foreground: var(--popover-foreground);
  --color-muted: var(--muted);
  --color-muted-foreground: var(--muted-foreground);
  --color-destructive: var(--destructive);
  --color-destructive-foreground: var(--destructive-foreground);
  --color-input: var(--input);
  --color-ring: var(--ring);
  --color-chart-1: var(--chart-1);
  --color-chart-2: var(--chart-2);
  --color-chart-3: var(--chart-3);
  --color-chart-4: var(--chart-4);
  --color-chart-5: var(--chart-5);
  --radius: var(--radius);
}

/* ===========================================
   GLOBAL BASE + REMAINING SHARED STYLES
   =========================================== */

@layer base {
  /* Global reset */
  * {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
  }

  /* Theme transitions only on interactive elements to avoid list perf hits */
  button,
  input,
  select,
  textarea,
  .sidebar-section,
  [class*='transition'] {
    transition-property: background-color, border-color, color, fill, stroke;
    transition-duration: 0.2s;
    transition-timing-function: ease;
  }

  html,
  body,
  #root {
    height: 100%;
    width: 100%;
    overflow: hidden;
  }

  body {
    font-family:
      'Nunito Sans',
      -apple-system,
      BlinkMacSystemFont,
      'Segoe UI',
      Oxygen,
      Ubuntu,
      Cantarell,
      'Open Sans',
      'Helvetica Neue',
      sans-serif;
    background-color: var(--color-bg);
    color: var(--color-text);
    font-size: 14px;
    letter-spacing: -0.01em;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }

  h1,
  h2,
  h3,
  h4,
  h5,
  h6,
  .sidebar-section h2,
  .app-header h1 {
    font-family:
      'Nunito Sans',
      -apple-system,
      BlinkMacSystemFont,
      'Segoe UI',
      sans-serif;
  }

  button:focus:not(:focus-visible),
  a:focus:not(:focus-visible),
  input:focus:not(:focus-visible),
  select:focus:not(:focus-visible),
  textarea:focus:not(:focus-visible) {
    outline: none;
  }

  input[type='checkbox']:focus-visible,
  input[type='radio']:focus-visible {
    outline: 2px solid var(--color-accent);
    outline-offset: 2px;
  }

  input[type='checkbox'],
  input[type='radio'] {
    accent-color: var(--color-accent);
  }

  ::-webkit-scrollbar {
    @apply w-2 h-2;
  }

  ::-webkit-scrollbar-track {
    background: var(--color-bg);
  }

  ::-webkit-scrollbar-thumb {
    background: var(--color-border);
    border-radius: var(--radius-sm);
  }

  ::-webkit-scrollbar-thumb:hover {
    background: var(--color-text-muted);
  }

  ::-webkit-scrollbar-corner {
    background: var(--color-bg);
  }

  * {
    scrollbar-width: thin;
    scrollbar-color: var(--color-border) var(--color-bg);
  }

  button:focus-visible,
  a:focus-visible,
  input:focus-visible,
  select:focus-visible,
  textarea:focus-visible,
  [tabindex]:focus-visible {
    @apply outline-2 outline-accent outline-offset-2;
  }
}

@layer components {
  input[type='color']:disabled {
    @apply opacity-50 cursor-not-allowed;
  }

  .color-picker-row {
    @apply flex items-center gap-3;
  }

  .color-picker-row input[type='color'] {
    @apply border border-border p-0 bg-transparent appearance-none;
    width: 44px;
    height: 36px;
    cursor: pointer;
    border-radius: var(--radius-sm);
  }

  .color-picker-row input[type='color']::-webkit-color-swatch-wrapper {
    padding: 4px;
    background: var(--color-bg);
    border-radius: calc(var(--radius-sm) - 1px);
  }

  .color-picker-row input[type='color']::-webkit-color-swatch {
    border: none;
    border-radius: calc(var(--radius-sm) - 2px);
  }

  .color-picker-row input[type='color']::-moz-color-swatch {
    border: none;
    border-radius: calc(var(--radius-sm) - 2px);
  }

  .hotkey-hints-container {
    @apply absolute left-1/2 flex flex-col items-center gap-2;
    bottom: 16px;
    transform: translateX(-50%);
    z-index: 50;
  }

  .hotkey-hints {
    @apply flex gap-5 bg-surface border border-border;
    padding: 10px 20px;
    border-radius: var(--radius-lg);
    opacity: 0.95;
    backdrop-filter: blur(8px);
  }

  .hotkey-hints-camera {
    @apply gap-4;
    padding: 8px 14px;
    opacity: 0.7;
  }

  .hotkey-hint {
    @apply flex items-center gap-2 text-text-muted whitespace-nowrap;
    font-size: 12px;
  }

  .hotkey-hint kbd {
    @apply inline-block bg-bg border border-border text-text;
    padding: 3px 8px;
    border-radius: var(--radius-sm);
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', monospace;
    font-size: 11px;
  }
}

@import './layout.css';
@import './domain.css';

/* ===========================================
   CUSTOM ANIMATIONS
   Used by migrated components (Dialog, UpdateNotificationBanner, etc.)
   =========================================== */

@layer utilities {
  .animate-toast-in {
    animation: toast-fade-in 0.2s ease-out;
  }
  .animate-modal-fade-in {
    animation: modal-fade-in 0.15s ease-out;
  }
}

@keyframes toast-fade-in {
  from {
    opacity: 0;
    transform: translateX(-50%) translateY(10px);
  }
  to {
    opacity: 1;
    transform: translateX(-50%) translateY(0);
  }
}

@keyframes modal-fade-in {
  from {
    opacity: 0;
    transform: scale(0.95);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}
